@using PagedList;
@using PagedList.Mvc;
@model IPagedList<HarmonyWebApp.Models.ActivityViewModel>


@{
    ViewBag.Title = "Harmony - Administracja";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}


<div class="panel panel-success">
    <div class="panel-heading">
        <h5 class="panel-title"><b><center>Panel administacyjny - baza dostępnych kursów</center></b></h5>
    </div>

    <div class="panel-group">

        <div class="panel panel-default">
            <div class="panel-body">

                <p>
                    @using (Html.BeginForm("CoursesPage", "Admin", FormMethod.Get))
                    {
                    <p>
                        Szukaj za pomocą:
                        @Html.RadioButton("searchBy", "Name", true) Nazwa
                        @Html.RadioButton("searchBy", "Code") Kod grupy<br />
                        @Html.TextBox("searchString")
                        <input type="submit" value="Szukaj" />
                    </p>
                    }
                    </p>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-body">



                    <table class="table table-striped table-condensed table-bordered">
                        <tr>
                            <th><center>Kod</center></th>
                            <th><center>Nazwa</center></th>
                            <th><center>Opis</center></th>
                            <th><center>Start</center></>
                            <th><center>Koniec</center></th>
                            <th><center>Częstość zajęć</center></th>
                            <th><center>Studia stacjonarne</center></th>
                            <th><center>Prowadzący</center></th>
                            <th><center>Miejsce</center></th>
                            <th><center>Forma kursu</center></th>
                            <th><center>Ilość miejsc</center></th>
                            <th><center>Ects</center></th>
                            <th><center>Wydział</center></th>
                            <th><center>Kierunek</center></th>
                            <th><center>Akcje</center></th>
                        </tr>
                        @if (Model.Count() == 0)
                        {
                            <tr>
                                <td colspan="15"> Brak zajęć o podanym kryterium </td>
                            </tr>
                        }
                        else
                        {
                            foreach (var item in Model)
                            {


                                <tr>
                                    <td style="min-width: 100px"><center>@item.Code</center></td>
                                    <td><center>@Html.ActionLink(item.Name, "Edit", new { item.Id })</center></td>
                                    <td style="min-width: 100px"><center>@item.Description</center></td>
                                    <td><center>@item.StartDate</center></td>
                                    <td><center>@item.EndDate</center></td>
                                    <td><center>@item.Every_x_Days dni</center></td>
                                    <td><center>@(item.FreeWeekends ? "TAK" : "NIE")</center></td>
                                    <td><center>@item.Instructor</center></td>
                                    <td><center>@item.Place</center></td>
                                    <td><center>@item.CourseForm</center></td>
                                    <td><center>@item.SeatsOccupied / @item.NumberOfSeats</center></td>
                                    <td><center>@item.Ects</center></td>
                                    <td style="min-width: 100px"><center>@item.DepartmentName</center></td>
                                    <td style="min-width: 100px"><center>@item.FieldOfStudyName</center></td>

                                    <td>
                                        @using (Html.BeginForm("Delete", "Admin"))
                                        {
                                            @Html.Hidden("id", item.Id)
                                            <input type="submit" value="Usuń" />
                                        }
                                    </td>
                                </tr>
                            }
                        }
                    </table>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-body">
                    @Html.ActionLink("Stwórz nowy kurs", "Create", null, new { @class = "btn btn-success" })
                </div>
            </div>
        </div>
    </div>


    @Html.PagedListPager(Model, page => Url.Action("CoursesPage", new { page, searchBy = Request.QueryString["searchBy"], searchString = Request.QueryString["searchString"] }),
                new PagedListRenderOptions() { Display = PagedListDisplayMode.IfNeeded })

